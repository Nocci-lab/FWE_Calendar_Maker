<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Annual Schedule 2026</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
:root{
  --main:#8BCF5A;
  --dark:#2E6B2E;
  --bg:#F3FBEE;
  --yellow:#FFF3B0;
}

body{
  font-family:"Hiragino Maru Gothic ProN", Arial, sans-serif;
  background:var(--bg);
  padding:20px;
}

button{
  background:var(--dark);
  color:white;
  border:none;
  padding:6px 16px;
  border-radius:6px;
  cursor:pointer;
  margin-bottom:10px;
}

.header-box{
  border:2px solid var(--dark);
  padding:12px;
  border-radius:10px;
  background:white;
  margin-bottom:16px;
}

.month{
  margin-bottom:40px;
  page-break-inside:avoid;
}

.month-title{
  font-size:30px;
  font-weight:bold;
  background:var(--main);
  color:white;
  padding:8px 14px;
  border-radius:10px;
  margin-bottom:10px;
  display:flex;
  align-items:center;
  gap:10px;
}

.calendar{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:2px;
}

.weekday{
  background:var(--main);
  color:white;
  text-align:center;
  font-weight:bold;
  padding:4px;
}

.day{
  border:1px solid #bbb;
  min-height:110px;
  padding:4px;
  background:white;
  cursor:pointer;
}

.day.sun{background:#FFF5F5;}
.day.sat{background:#F5FAFF;}

.day.green{
  background:var(--main);
  border:3px solid var(--dark);
}

.day.yellow{
  background:var(--yellow);
  border:3px solid #C9A700;
}

.label{
  font-size:10px;
  line-height:1.2;
  margin-top:2px;
  color:#444;
}

.memo textarea{
  width:100%;
  height:60px;
  font-size:13px;
}

/* PDFç”¨ */
.pdf-text{
  font-size:18px;
  font-weight:bold;
}
</style>
</head>

<body>

<button onclick="savePDF()">Save as PDF</button>

<!-- SCHOOL NAME -->
<div class="header-box">
  <input id="schoolName" placeholder="SCHOOL NAME"
    style="font-size:36px;font-weight:bold;width:100%;border:none;outline:none;">
</div>

<!-- COMMON INFO -->
<div class="header-box">
  Teacher:
  <input id="teacherName" style="width:200px;margin-right:30px;">
  Class:
  <input id="className" style="width:300px;">
</div>

<div id="content"></div>

<script>
let mode="green";
const selected=new Set();

const holidays={
 "2026-04-29":"Showa Day",
 "2026-05-03":"Constitution Memorial Day",
 "2026-05-04":"Greenery Day",
 "2026-05-05":"Childrenâ€™s Day",
 "2026-08-13":"Obon",
 "2026-08-14":"Obon",
 "2026-08-15":"Obon",
 "2026-11-03":"Culture Day",
 "2026-11-23":"Labor Thanksgiving Day",
 "2027-01-01":"New Yearâ€™s Day",
 "2027-02-11":"National Foundation Day",
 "2027-02-23":"Emperorâ€™s Birthday"
};

const monthNames={
 4:"April",5:"May",6:"June",7:"July",8:"August",
 9:"September",10:"October",11:"November",12:"December",
 1:"January",2:"February",3:"March"
};

const monthIcons={
 4:"ğŸŒ¸",5:"ğŸ",6:"â˜”",7:"ğŸŒ»",8:"ğŸ‰",
 9:"ğŸ",10:"ğŸƒ",11:"ğŸ‚",12:"ğŸ„",
 1:"ğŸ",2:"â›„",3:"ğŸŒ·"
};

const weekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
const content=document.getElementById("content");

function createMonth(y,m){
  const div=document.createElement("div");
  div.className="month";

  div.innerHTML=`
    <div class="month-title">
      ${y}å¹´ ${m+1}æœˆ / ${monthNames[m+1]} ${monthIcons[m+1]||""}
    </div>
    <div class="calendar"></div>
    <div class="memo"><strong>Memo:</strong><br><textarea></textarea></div>
  `;

  const cal=div.querySelector(".calendar");
  weekdays.forEach(w=>{
    const wd=document.createElement("div");
    wd.className="weekday";
    wd.textContent=w;
    cal.appendChild(wd);
  });

  const first=new Date(y,m,1).getDay();
  const last=new Date(y,m+1,0).getDate();
  for(let i=0;i<first;i++) cal.appendChild(document.createElement("div"));

  for(let d=1;d<=last;d++){
    const date=new Date(y,m,d);
    const key=date.toISOString().slice(0,10);
    const cell=document.createElement("div");
    cell.className="day";
    if(date.getDay()==0)cell.classList.add("sun");
    if(date.getDay()==6)cell.classList.add("sat");

    cell.innerHTML=`<strong>${d}</strong>`;
    if(holidays[key]) cell.innerHTML+=`<div class="label">${holidays[key]}</div>`;

    cell.onclick=()=>{
      if(cell.classList.contains("green")||cell.classList.contains("yellow")){
        cell.classList.remove("green","yellow");
        selected.delete(key);
      }else{
        if(selected.size>=42)return;
        cell.classList.add(mode);
        selected.add(key);
      }
      total.textContent=`Selected Days: ${selected.size} / 42`;
    };
    cal.appendChild(cell);
  }
  content.appendChild(div);
}

for(let m=3;m<12;m++)createMonth(2026,m);
for(let m=0;m<3;m++)createMonth(2027,m);

const total=document.createElement("div");
total.style.fontSize="18px";
total.style.fontWeight="bold";
total.textContent="Selected Days: 0 / 42";
content.appendChild(total);

document.addEventListener("keydown",e=>{
  if(e.key==="g")mode="green";
  if(e.key==="y")mode="yellow";
});

function savePDF(){
  // å…¥åŠ›æ¬„ â†’ ãƒ†ã‚­ã‚¹ãƒˆåŒ–
  const inputs=[
    {id:"schoolName"},
    {id:"teacherName"},
    {id:"className"}
  ];

  const backups=[];
  inputs.forEach(o=>{
    const el=document.getElementById(o.id);
    backups.push({el,value:el.value});
    const span=document.createElement("div");
    span.className="pdf-text";
    span.textContent=el.value || "";
    el.replaceWith(span);
    o.span=span;
  });

  html2pdf().set({
    margin:6,
    filename:'Annual_Schedule_2026.pdf',
    html2canvas:{scale:2},
    jsPDF:{format:'a4'}
  }).from(document.body).save().then(()=>{
    // å…ƒã«æˆ»ã™
    inputs.forEach((o,i)=>{
      o.span.replaceWith(backups[i].el);
    });
  });
}
</script>

<p>G = Lesson Day / Y = Reserve Day</p>

</body>
</html>
